<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
</head>
<body>

<h2>Candidate Applications</h2>

<table border="1" width="100%">
<thead>
<tr>
<th>Name</th>
<th>Phone</th>
<th>Role</th>
<th>Location</th>
<th>Date</th>
</tr>
</thead>

<tbody id="data">
<tr><td colspan="5">Loading...</td></tr>
</tbody>
</table>

<script>

const API = "https://jobapp.staffnexats.com/candidates";

async function load() {
    try {
        const res = await fetch(API);
        const data = await res.json();

        const tbody = document.getElementById("data");
        tbody.innerHTML = "";

        data.forEach(d => {
            const tr = document.createElement("tr");

            tr.innerHTML = `
                <td>${d.name}</td>
                <td>${d.phone}</td>
                <td>${d.role}</td>
                <td>${d.location}</td>
                <td>${new Date(d.createdAt).toLocaleString()}</td>
            `;

            tbody.appendChild(tr);
        });

    } catch(e) {
        document.getElementById("data").innerHTML = "<tr><td colspan='5'>Error</td></tr>";
        console.log(e);
    }
}

load();

</script>

</body>
</html>
