<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Staffnexa Admin — Client Enquiries</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<style>
body{
    font-family: 'Inter', sans-serif;
    background:#f3f4f6;
}
</style>
</head>

<body class="min-h-screen">

<!-- TOP NAV -->
<nav class="bg-blue-700 text-white px-6 py-4 flex justify-between items-center shadow">
    <h1 class="text-lg font-semibold">Staffnexa Admin — Client Enquiries</h1>
    <button onclick="logout()" class="bg-white text-blue-700 px-4 py-1.5 rounded-lg text-sm font-semibold hover:bg-gray-100">
        Logout
    </button>
</nav>

<div class="max-w-7xl mx-auto px-6 py-8">

    <!-- ACTION BAR -->
    <div class="flex justify-between items-center mb-6">

        <!-- LEFT FILTERS -->
        <div class="flex gap-4">
            <input type="text" id="searchInput" placeholder="Search company..."
                class="px-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500">

            <select id="roleFilter" class="px-4 py-2 border rounded-lg text-sm">
                <option value="">All Roles</option>
                <option value="Pantry">Pantry</option>
                <option value="Housekeeping">Housekeeping</option>
            </select>
        </div>

        <!-- RIGHT ACTIONS -->
        <div class="flex gap-3">
            <button onclick="saveChanges()" 
                class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700">
                Save
            </button>

            <button onclick="deleteSelected()" 
                class="bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700">
                Delete Selected
            </button>

            <button onclick="exportCSV()" 
                class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700">
                Export CSV
            </button>
        </div>
    </div>

    <!-- TABLE -->
    <div class="bg-white rounded-xl shadow overflow-hidden">
        <table class="min-w-full text-sm" id="enquiryTable">
            <thead class="bg-gray-100">
                <tr>
                    <th class="px-4 py-3 text-left">
                        <input type="checkbox" id="selectAll">
                    </th>
                    <th class="px-4 py-3 text-left">Company</th>
                    <th class="px-4 py-3 text-left">Contact</th>
                    <th class="px-4 py-3 text-left">Phone</th>
                    <th class="px-4 py-3 text-left">Role</th>
                    <th class="px-4 py-3 text-left">Staff</th>
                    <th class="px-4 py-3 text-left">Location</th>
                    <th class="px-4 py-3 text-left">Timeline</th>
                    <th class="px-4 py-3 text-left">Quotation</th>
                </tr>
            </thead>

            <tbody class="divide-y">

                <tr>
                    <td class="px-4 py-3">
                        <input type="checkbox" class="rowCheck">
                    </td>
                    <td class="px-4 py-3">Haldiram</td>
                    <td class="px-4 py-3">Ramesh</td>
                    <td class="px-4 py-3">7011160905</td>
                    <td class="px-4 py-3">Pantry</td>
                    <td class="px-4 py-3">4</td>
                    <td class="px-4 py-3">Noida</td>
                    <td class="px-4 py-3">Within 7 days</td>
                    <td class="px-4 py-3">
                        <select class="border rounded px-2 py-1 text-sm">
                            <option>Pending</option>
                            <option>Sent</option>
                            <option>Rejected</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td class="px-4 py-3">
                        <input type="checkbox" class="rowCheck">
                    </td>
                    <td class="px-4 py-3">XYZ Company</td>
                    <td class="px-4 py-3">Satish</td>
                    <td class="px-4 py-3">9821662169</td>
                    <td class="px-4 py-3">Housekeeping</td>
                    <td class="px-4 py-3">3</td>
                    <td class="px-4 py-3">Delhi</td>
                    <td class="px-4 py-3">Immediate</td>
                    <td class="px-4 py-3">
                        <select class="border rounded px-2 py-1 text-sm">
                            <option>Pending</option>
                            <option>Sent</option>
                            <option>Rejected</option>
                        </select>
                    </td>
                </tr>

            </tbody>
        </table>
    </div>
</div>

<script>

// ===== SESSION CONTROL =====

if(!localStorage.getItem("adminAuth")){
    window.location.href = "index.html";
}

let inactivityTimer;

function resetTimer(){
    clearTimeout(inactivityTimer);
    inactivityTimer = setTimeout(()=>{
        alert("Session expired due to inactivity");
        logout();
    }, 300000); // 30 seconds
}

["click","mousemove","keypress"].forEach(event=>{
    document.addEventListener(event, resetTimer);
});

resetTimer();

// ===== LOGOUT =====

function logout(){
    localStorage.removeItem("adminAuth");
    window.location.href = "index.html";
}

// ===== SELECT ALL =====

document.getElementById("selectAll").addEventListener("change", function(){
    document.querySelectorAll(".rowCheck").forEach(cb=>{
        cb.checked = this.checked;
    });
});

// ===== DELETE SELECTED =====

function deleteSelected(){
    const rows = document.querySelectorAll(".rowCheck:checked");
    if(rows.length===0){
        alert("No rows selected");
        return;
    }
    if(confirm("Delete selected enquiries?")){
        rows.forEach(cb=>{
            cb.closest("tr").remove();
        });
    }
}

// ===== SAVE =====

function saveChanges(){
    alert("Changes saved successfully.");
}

// ===== EXPORT CSV =====

function exportCSV(){
    alert("Exporting CSV...");
}

</script>

</body>
</html>
